<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>loki on Vikas Pogu&#39;s Blog</title>
    <link>https://vikaspogu.dev/tags/loki/</link>
    <description>Recent content in loki on Vikas Pogu&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 04 Nov 2020 00:00:00 +0000</lastBuildDate><atom:link href="https://vikaspogu.dev/tags/loki/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Syslog with Loki Promtail</title>
      <link>https://vikaspogu.dev/posts/loki-rsyslog-k3s/</link>
      <pubDate>Wed, 04 Nov 2020 00:00:00 +0000</pubDate>
      
      <guid>https://vikaspogu.dev/posts/loki-rsyslog-k3s/</guid>
      <description>Loki Promtail Enable syslog, do this on each host and replace target IP (and maybe port) with you syslog externalIP that is in helm values for promtail
promtail:serviceMonitor:enabled:trueextraScrapeConfigs:- job_name:syslogsyslog:listen_address:0.0.0.0:1514label_structured_data:yeslabels:job:&amp;#34;syslog&amp;#34;relabel_configs:- source_labels:[&amp;#34;__syslog_connection_ip_address&amp;#34;]target_label:&amp;#34;ip_address&amp;#34;- source_labels:[&amp;#34;__syslog_message_severity&amp;#34;]target_label:&amp;#34;severity&amp;#34;- source_labels:[&amp;#34;__syslog_message_facility&amp;#34;]target_label:&amp;#34;facility&amp;#34;- source_labels:[&amp;#34;__syslog_message_hostname&amp;#34;]target_label:&amp;#34;host&amp;#34;syslogService:enabled:truetype:LoadBalancerport:1514externalIPs:- 192.168.42.155Create file /etc/rsyslog.d/50-promtail.conf with the following content:
module(load=&amp;#34;omprog&amp;#34;) module(load=&amp;#34;mmutf8fix&amp;#34;) action(type=&amp;#34;mmutf8fix&amp;#34; replacementChar=&amp;#34;?&amp;#34;) action(type=&amp;#34;omfwd&amp;#34; protocol=&amp;#34;tcp&amp;#34; target=&amp;#34;192.168.42.155&amp;#34; port=&amp;#34;1514&amp;#34; Template=&amp;#34;RSYSLOG_SyslogProtocol23Format&amp;#34; TCP_Framing=&amp;#34;octet-counted&amp;#34; KeepAlive=&amp;#34;on&amp;#34;) Restart rsyslog and view status
sudo systemctl restart rsyslog sudo systemctl status rsyslog In Grafana, on the explore tab, you should now be able to view you hosts logs, e.</description>
    </item>
    
  </channel>
</rss>
